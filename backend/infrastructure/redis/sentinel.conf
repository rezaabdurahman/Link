# Redis Sentinel Configuration for High Availability
# This configuration sets up Redis Sentinel for automatic failover

# Basic Sentinel Configuration
port 26379
bind 0.0.0.0

# Sentinel ID (will be auto-generated if not specified)
# sentinel announce-ip <sentinel-ip>
# sentinel announce-port <sentinel-port>

# Log level: debug, verbose, notice, warning
loglevel notice
logfile ""
syslog-enabled yes
syslog-ident redis-sentinel

# Working directory
dir /tmp

# Master Configuration
# sentinel monitor <master-name> <master-ip> <master-port> <quorum>
# Quorum: minimum number of Sentinels that need to agree about the fact that a master is down
sentinel monitor mymaster redis-master 6379 2

# Authentication
# If Redis master requires authentication, set the password
# sentinel auth-pass mymaster <password>
# sentinel auth-user mymaster <username>

# Connection Timeouts
# Down after period: milliseconds master should be unreachable to be considered down
sentinel down-after-milliseconds mymaster 5000

# Parallel syncs: how many replicas can be reconfigured at the same time during failover
sentinel parallel-syncs mymaster 1

# Failover timeout: timeout for failover operations
sentinel failover-timeout mymaster 10000

# Notification Scripts
# These scripts are executed when certain Sentinel events occur

# Script to execute when a master changes (notification-script)
# sentinel notification-script mymaster /path/to/notify.sh

# Script to execute for reconfiguring the new master (client-reconfig-script)  
# sentinel client-reconfig-script mymaster /path/to/reconfig.sh

# Deny dangerous commands during reconfiguration
sentinel deny-scripts-reconfig yes

# Security
# Require AUTH for clients connecting to Sentinel
# requirepass <password>

# Access Control Lists (Redis 6.0+)
# user sentinel-user on nopass ~* &* -@all +ping +sentinel +subscribe +unsubscribe +psubscribe +punsubscribe +publish +info +client +hello +auth

# Advanced Configuration
# Announce IP and Port for Sentinel (useful in Docker/NAT environments)
# sentinel announce-ip 10.1.1.5
# sentinel announce-port 26379

# TILT mode protection
# If a Sentinel receives many SDOWN reports it enters TILT mode
# In TILT mode no monitoring activities are performed
# sentinel tilt-trigger 5000

# Configuration propagation
# When a master is reconfigured, Sentinel will update the configuration
# and save it to disk. The following setting controls how often Sentinel
# saves the configuration.
# sentinel config-epoch mymaster 0

# Resolve hostnames
# sentinel resolve-hostnames yes
# sentinel announce-hostnames yes
