# Monitoring Stack Profiles Configuration
# Used to control which monitoring components are enabled based on environment needs
# Profiles: minimal, standard, full, custom

# Global Settings
MONITORING_PROFILE=${MONITORING_PROFILE:-standard}
MONITORING_NAMESPACE=${MONITORING_NAMESPACE:-monitoring}

# ===== MINIMAL PROFILE =====
# Core metrics only - 70% cost reduction
# Ideal for: Development, cost-sensitive environments
MINIMAL_PROMETHEUS_ENABLED=true
MINIMAL_GRAFANA_ENABLED=true
MINIMAL_NODE_EXPORTER_ENABLED=false  # Use Prometheus self-monitoring
MINIMAL_CADVISOR_ENABLED=false
MINIMAL_LOKI_ENABLED=false
MINIMAL_PROMTAIL_ENABLED=false
MINIMAL_JAEGER_ENABLED=false
MINIMAL_ALERTMANAGER_ENABLED=false
MINIMAL_REDIS_EXPORTER_ENABLED=false
MINIMAL_POSTGRES_EXPORTER_ENABLED=false
MINIMAL_BLACKBOX_EXPORTER_ENABLED=false
# Retention & Resources
MINIMAL_PROMETHEUS_RETENTION=3d
MINIMAL_LOKI_RETENTION=1d
MINIMAL_JAEGER_SAMPLING=0.01  # 1% sampling
MINIMAL_PROMETHEUS_STORAGE=10Gi
MINIMAL_LOKI_STORAGE=5Gi

# ===== STANDARD PROFILE =====
# Balanced monitoring - 40% cost reduction
# Ideal for: Staging, production with budget constraints
STANDARD_PROMETHEUS_ENABLED=true
STANDARD_GRAFANA_ENABLED=true
STANDARD_NODE_EXPORTER_ENABLED=true
STANDARD_CADVISOR_ENABLED=true
STANDARD_LOKI_ENABLED=true
STANDARD_PROMTAIL_ENABLED=true
STANDARD_JAEGER_ENABLED=true
STANDARD_ALERTMANAGER_ENABLED=true
STANDARD_REDIS_EXPORTER_ENABLED=true
STANDARD_POSTGRES_EXPORTER_ENABLED=true
STANDARD_BLACKBOX_EXPORTER_ENABLED=false  # Optional for uptime monitoring
# Retention & Resources
STANDARD_PROMETHEUS_RETENTION=7d
STANDARD_LOKI_RETENTION=3d
STANDARD_JAEGER_SAMPLING=0.1  # 10% sampling
STANDARD_PROMETHEUS_STORAGE=20Gi
STANDARD_LOKI_STORAGE=30Gi

# ===== FULL PROFILE =====
# Complete observability - Current configuration
# Ideal for: Production debugging, comprehensive monitoring
FULL_PROMETHEUS_ENABLED=true
FULL_GRAFANA_ENABLED=true
FULL_NODE_EXPORTER_ENABLED=true
FULL_CADVISOR_ENABLED=true
FULL_LOKI_ENABLED=true
FULL_PROMTAIL_ENABLED=true
FULL_JAEGER_ENABLED=true
FULL_ALERTMANAGER_ENABLED=true
FULL_REDIS_EXPORTER_ENABLED=true
FULL_POSTGRES_EXPORTER_ENABLED=true
FULL_BLACKBOX_EXPORTER_ENABLED=true
# Retention & Resources
FULL_PROMETHEUS_RETENTION=30d
FULL_LOKI_RETENTION=7d
FULL_JAEGER_SAMPLING=1.0  # 100% sampling
FULL_PROMETHEUS_STORAGE=50Gi
FULL_LOKI_STORAGE=100Gi

# ===== CUSTOM PROFILE =====
# User-defined component selection
# Override any individual component by setting CUSTOM_[SERVICE]_ENABLED=true/false
CUSTOM_PROMETHEUS_ENABLED=${CUSTOM_PROMETHEUS_ENABLED:-true}
CUSTOM_GRAFANA_ENABLED=${CUSTOM_GRAFANA_ENABLED:-true}
CUSTOM_NODE_EXPORTER_ENABLED=${CUSTOM_NODE_EXPORTER_ENABLED:-false}
CUSTOM_CADVISOR_ENABLED=${CUSTOM_CADVISOR_ENABLED:-false}
CUSTOM_LOKI_ENABLED=${CUSTOM_LOKI_ENABLED:-false}
CUSTOM_PROMTAIL_ENABLED=${CUSTOM_PROMTAIL_ENABLED:-false}
CUSTOM_JAEGER_ENABLED=${CUSTOM_JAEGER_ENABLED:-false}
CUSTOM_ALERTMANAGER_ENABLED=${CUSTOM_ALERTMANAGER_ENABLED:-false}
CUSTOM_REDIS_EXPORTER_ENABLED=${CUSTOM_REDIS_EXPORTER_ENABLED:-false}
CUSTOM_POSTGRES_EXPORTER_ENABLED=${CUSTOM_POSTGRES_EXPORTER_ENABLED:-false}
CUSTOM_BLACKBOX_EXPORTER_ENABLED=${CUSTOM_BLACKBOX_EXPORTER_ENABLED:-false}
# Retention & Resources
CUSTOM_PROMETHEUS_RETENTION=${CUSTOM_PROMETHEUS_RETENTION:-7d}
CUSTOM_LOKI_RETENTION=${CUSTOM_LOKI_RETENTION:-3d}
CUSTOM_JAEGER_SAMPLING=${CUSTOM_JAEGER_SAMPLING:-0.1}
CUSTOM_PROMETHEUS_STORAGE=${CUSTOM_PROMETHEUS_STORAGE:-20Gi}
CUSTOM_LOKI_STORAGE=${CUSTOM_LOKI_STORAGE:-30Gi}

# ===== ENVIRONMENT-SPECIFIC OVERRIDES =====
# Development Environment
DEV_PROMETHEUS_RETENTION=1d
DEV_LOKI_RETENTION=6h
DEV_JAEGER_SAMPLING=0.01
DEV_PROMETHEUS_STORAGE=5Gi
DEV_LOKI_STORAGE=2Gi

# Production Environment (Full monitoring with optimized retention)
PROD_PROMETHEUS_RETENTION=14d  # Reduced from 30d
PROD_LOKI_RETENTION=5d         # Reduced from 7d
PROD_JAEGER_SAMPLING=0.3       # Reduced from 100%
PROD_PROMETHEUS_STORAGE=30Gi   # Reduced from 50Gi
PROD_LOKI_STORAGE=50Gi         # Reduced from 100Gi

# ===== FEATURE FLAGS =====
# Advanced features that can be toggled independently
ENABLE_CUSTOM_DASHBOARDS=${ENABLE_CUSTOM_DASHBOARDS:-true}
ENABLE_SLO_MONITORING=${ENABLE_SLO_MONITORING:-true}
ENABLE_COST_ANALYSIS=${ENABLE_COST_ANALYSIS:-false}
ENABLE_PERFORMANCE_BASELINE=${ENABLE_PERFORMANCE_BASELINE:-false}
ENABLE_SECURITY_MONITORING=${ENABLE_SECURITY_MONITORING:-false}

# ===== RESOURCE LIMITS =====
# Docker resource constraints per profile
MINIMAL_CPU_LIMIT=2
MINIMAL_MEMORY_LIMIT=2G
STANDARD_CPU_LIMIT=4
STANDARD_MEMORY_LIMIT=6G
FULL_CPU_LIMIT=8
FULL_MEMORY_LIMIT=16G

# ===== NETWORKING =====
MONITORING_NETWORK_NAME=link_monitoring
EXTERNAL_NETWORK_NAME=link-network
PROMETHEUS_PORT=9090
GRAFANA_PORT=3001
LOKI_PORT=3100
JAEGER_PORT=16686

# ===== SECRETS =====
GRAFANA_ADMIN_USER=${GRAFANA_ADMIN_USER:-admin}
GRAFANA_ADMIN_PASSWORD=${GRAFANA_ADMIN_PASSWORD:-admin123}

# ===== BACKUP CONFIGURATION =====
# When disabling services, create volume backups
CREATE_VOLUME_BACKUP=${CREATE_VOLUME_BACKUP:-true}
BACKUP_RETENTION_DAYS=${BACKUP_RETENTION_DAYS:-30}
BACKUP_PATH=${BACKUP_PATH:-./backups/monitoring}